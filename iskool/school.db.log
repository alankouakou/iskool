/*C11*/SET SCHEMA PUBLIC
drop table annee_academique if exists
drop table classe if exists
drop table eleve if exists
drop table evaluation if exists
drop table note if exists
drop table periode if exists
drop table type_note if exists
create table annee_academique (id bigint generated by default as identity (start with 1), date_debut timestamp, date_fin timestamp, name varchar(255), primary key (id))
create table classe (id bigint generated by default as identity (start with 1), name varchar(255), primary key (id))
create table eleve (id bigint generated by default as identity (start with 1), date_naissance timestamp not null, nom varchar(255), prenom varchar(255), classe_id bigint, primary key (id))
create table evaluation (id bigint generated by default as identity (start with 1), date_evaluation date, date_maj timestamp, classe_id bigint, type_evaluation_id bigint, primary key (id))
create table note (id bigint generated by default as identity (start with 1), date timestamp, valeur double, eleve_id bigint, evaluation_id bigint, primary key (id))
create table periode (id bigint generated by default as identity (start with 1), name varchar(255), primary key (id))
create table type_note (id bigint generated by default as identity (start with 1), name varchar(255), ponderation double not null, primary key (id))
alter table eleve add constraint FK8nrji46bsbcoohx749w9j78yx foreign key (classe_id) references classe
alter table evaluation add constraint FKgpbdtmevrqb6tnajbhj1vyxko foreign key (classe_id) references classe
alter table evaluation add constraint FKeotiq177wxtn70iap731xe6vi foreign key (type_evaluation_id) references type_note
alter table note add constraint FKm4rbq37cfv2fk8e2yb28a5ls5 foreign key (eleve_id) references eleve
alter table note add constraint FK39gnykxuo318ahxlu7rsv8mk2 foreign key (evaluation_id) references evaluation
INSERT INTO TYPE_NOTE VALUES(1,'Test leger',1.0E0)
INSERT INTO TYPE_NOTE VALUES(2,'Test lourd',2.0E0)
INSERT INTO TYPE_NOTE VALUES(3,'Travaux Pratiques',2.0E0)
COMMIT
INSERT INTO PERIODE VALUES(1,'1er Semestre')
INSERT INTO PERIODE VALUES(2,'2e Semestre')
COMMIT
INSERT INTO CLASSE VALUES(1,'6eme A')
INSERT INTO CLASSE VALUES(2,'6eme B')
COMMIT
INSERT INTO ELEVE VALUES(1,'2006-02-01 00:00:00.000000','KOFFI','St\u00e9phane',1)
INSERT INTO ELEVE VALUES(2,'2005-10-03 00:00:00.000000','TAPE','Cedric',2)
INSERT INTO ELEVE VALUES(3,'2003-05-23 00:00:00.000000','KOUASSI','Rosine',1)
INSERT INTO ELEVE VALUES(4,'2005-07-12 00:00:00.000000','COULIBALY','Mariama',1)
INSERT INTO ELEVE VALUES(5,'2005-03-07 00:00:00.000000','YAO','Olivier',1)
INSERT INTO ELEVE VALUES(6,'2006-06-03 00:00:00.000000','ZIKE','Rodrigue',2)
INSERT INTO ELEVE VALUES(7,'2006-11-09 00:00:00.000000','KOUAKOU','Aur\u00e9lien',2)
INSERT INTO ELEVE VALUES(8,'2005-12-12 00:00:00.000000','KONE','Abou',2)
COMMIT
INSERT INTO EVALUATION VALUES(1,'2016-12-03','2017-04-28 11:47:18.255000',1,1)
INSERT INTO EVALUATION VALUES(2,'2017-04-01','2017-04-28 11:47:18.255000',2,2)
INSERT INTO EVALUATION VALUES(3,'2017-02-01','2017-04-28 11:47:18.255000',1,2)
COMMIT
INSERT INTO NOTE VALUES(1,'2017-04-28 11:47:18.260000',15.0E0,1,1)
INSERT INTO NOTE VALUES(2,'2017-04-28 11:47:18.260000',12.0E0,2,2)
INSERT INTO NOTE VALUES(3,'2017-04-28 11:47:18.260000',14.0E0,3,1)
INSERT INTO NOTE VALUES(4,'2017-04-28 11:47:18.260000',17.0E0,4,1)
INSERT INTO NOTE VALUES(5,'2017-04-28 11:47:18.260000',18.0E0,5,1)
COMMIT
INSERT INTO NOTE VALUES(6,NULL,12.0E0,6,2)
COMMIT
INSERT INTO NOTE VALUES(7,NULL,13.5E0,7,2)
COMMIT
INSERT INTO NOTE VALUES(8,NULL,15.5E0,8,2)
COMMIT
INSERT INTO NOTE VALUES(9,NULL,11.0E0,1,3)
COMMIT
INSERT INTO NOTE VALUES(10,NULL,14.0E0,3,3)
COMMIT
INSERT INTO NOTE VALUES(11,NULL,16.0E0,4,3)
COMMIT
INSERT INTO NOTE VALUES(12,NULL,17.0E0,5,3)
COMMIT
INSERT INTO EVALUATION VALUES(4,NULL,'2017-04-28 00:00:00.000000',2,1)
COMMIT
DELETE FROM EVALUATION WHERE ID=4
INSERT INTO EVALUATION VALUES(4,'2017-03-12','2017-04-28 00:00:00.000000',2,1)
COMMIT
DELETE FROM EVALUATION WHERE ID=4
INSERT INTO EVALUATION VALUES(4,'2017-04-12','2017-04-28 00:00:00.000000',2,1)
COMMIT
INSERT INTO NOTE VALUES(13,NULL,12.0E0,2,4)
COMMIT
INSERT INTO NOTE VALUES(14,NULL,14.0E0,6,4)
COMMIT
INSERT INTO NOTE VALUES(15,NULL,14.0E0,7,4)
COMMIT
INSERT INTO NOTE VALUES(16,NULL,15.0E0,8,4)
COMMIT
INSERT INTO EVALUATION VALUES(5,NULL,'2017-04-28 00:00:00.000000',2,1)
COMMIT
DELETE FROM EVALUATION WHERE ID=5
INSERT INTO EVALUATION VALUES(5,'2017-04-10','2017-04-28 00:00:00.000000',2,1)
COMMIT
DELETE FROM EVALUATION WHERE ID=5
INSERT INTO EVALUATION VALUES(5,'2017-04-18','2017-04-28 00:00:00.000000',2,1)
COMMIT
DELETE FROM EVALUATION WHERE ID=5
INSERT INTO EVALUATION VALUES(5,'2017-04-18','2017-04-28 00:00:00.000000',2,3)
COMMIT
INSERT INTO NOTE VALUES(17,NULL,13.0E0,2,5)
COMMIT
INSERT INTO NOTE VALUES(18,NULL,14.0E0,6,5)
COMMIT
INSERT INTO NOTE VALUES(19,NULL,15.0E0,7,5)
COMMIT
INSERT INTO NOTE VALUES(20,NULL,15.0E0,8,5)
COMMIT
